<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Calculatrice Transport Colivex</title>

<style>
:root{
  --red:#c00000;      /* ROUGE DOMINANT */
  --redDark:#a00000;
  --blue:#1f4e79;     /* Accent seulement */
  --bg:#ffffff;
  --border:#d6d6d6;
  --soft:#f7f7f7;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:var(--bg);
  color:#111;
}

.container{
  max-width:760px;
  margin:0 auto;
  padding:14px;
}

/* BARRE ROUGE (DOMINANTE) */
.topBar{
  background:var(--red);
  color:#fff;
  font-weight:900;
  font-size:18px;
  text-align:center;
  padding:14px;
  border-radius:10px;
  margin-bottom:12px;
}

/* CARTES */
.card{
  border:1px solid var(--border);
  border-radius:10px;
  background:#fff;
  padding:14px;
  margin-bottom:12px;
}

/* TITRES SECTIONS ROUGES */
.sectionTitle{
  background:var(--red);
  color:#fff;
  font-weight:900;
  padding:10px 12px;
  border-radius:8px;
  margin:-14px -14px 12px -14px;
}

/* CHAMPS */
label{
  font-weight:800;
  font-size:14px;
  display:block;
  margin-top:10px;
  color:var(--redDark);
}
input, select, button{
  width:100%;
  padding:12px;
  margin-top:6px;
  border:1px solid var(--border);
  border-radius:8px;
  font-size:16px;
  background:#fff;
}

/* GRILLE */
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
@media(max-width:600px){
  .grid{grid-template-columns:1fr;}
}

/* BOUTONS */
.btnCalc{
  background:var(--red);
  color:#fff;
  border:none;
  font-weight:900;
  font-size:18px;
  padding:14px;
  border-radius:10px;
  cursor:pointer;
}
.btnCalc:active{background:var(--redDark);}

.btnAlt{
  background:#fff;
  color:var(--red);
  border:2px solid var(--red);
  font-weight:800;
  border-radius:10px;
  cursor:pointer;
}

/* EXTRAS */
.extraItem{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border:1px solid var(--border);
  border-radius:10px;
  padding:10px;
  margin-top:8px;
  background:#fff;
}
.removeBtn{
  width:40px;
  height:40px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#fff;
  font-size:18px;
  cursor:pointer;
  color:var(--red);
}

/* RÉSUMÉ */
.summaryBox{
  border:2px solid var(--red);
  border-radius:12px;
  padding:14px;
  background:#fff;
}
.summaryRow{
  display:flex;
  justify-content:space-between;
  padding:8px 0;
  border-bottom:1px solid var(--border);
}
.summaryRow:last-child{border-bottom:none;}
.totalBig{
  font-size:18px;
  font-weight:900;
  color:var(--red);
}

.small{
  font-size:13px;
  color:#555;
}
</style>
</head>

<body>
<div class="container">

  <div class="topBar">Calculatrice Transport Colivex</div>

  <!-- HEURES -->
  <div class="card">
    <div class="sectionTitle">Heures de travail</div>

    <div class="grid">
      <div>
        <label>Heure d’arrivée</label>
        <input id="startTime" type="time">
      </div>
      <div>
        <label>Heure de départ</label>
        <input id="endTime" type="time">
      </div>
      <div>
        <label>Heures travaillées (auto)</label>
        <input id="hoursWorked" type="number" readonly>
        <div class="small">Calcul automatique (gère minuit)</div>
      </div>
      <div>
        <label>Tarif horaire ($)</label>
        <input id="rate" type="number" value="145">
      </div>
      <div>
        <label>Frais transport (heures)</label>
        <input id="transportHours" type="number" value="1" step="0.25">
      </div>
      <div>
        <label>Dépôt reçu (tx incluses)</label>
        <input id="deposit" type="number" value="250">
      </div>
    </div>
  </div>

  <!-- EXTRAS -->
  <div class="card">
    <div class="sectionTitle">Ajouter des extras</div>

    <select id="extraSelect">
      <option value="2.5">Ruban adhésif 2 pouces (TAPE) — 2,50 $</option>
      <option value="6">Housse à matelas 39" (simple) — 6,00 $</option>
      <option value="8">Housse à matelas 60" (queen) — 8,00 $</option>
      <option value="11">Housse à matelas 70" (king) — 11,00 $</option>
      <option value="2.25">Boîte 1,5 pieds cubes — 2,25 $</option>
      <option value="2.75">Boîte 2 pieds cubes — 2,75 $</option>
      <option value="4.5">Boîte 4 pieds cubes — 4,50 $</option>
      <option value="5.5">Boîte 5 pieds cubes — 5,50 $</option>
      <option value="7">Boîte à vaisselle — 7,00 $</option>
      <option value="7.5">Boîte abat-jour — 7,50 $</option>
      <option value="18.5">Boîte garde-robes (inclut la barre) — 18,50 $</option>
      <option value="0">GARDE-ROBES **NO CHARGE** — 0,00 $</option>
      <option value="7.5">Boîte miroir / cadre (Inner) — 7,50 $</option>
      <option value="8.5">Boîte miroir / cadre (Outer) — 8,50 $</option>
      <option value="8.5">Rouleau papier bulles — 8,50 $</option>
      <option value="15">Papier d'emballage 10 lb — 15,00 $</option>
      <option value="27.5">Papier d'emballage 25 lb — 27,50 $</option>
      <option value="25">Couverture matelassée — 25,00 $</option>
      <option value="15">Couverture matelassée (usagée) — 15,00 $</option>
      <option value="18.5">Garde-Robes usagée — 18,50 $</option>
    </select>

    <div class="grid">
      <div>
        <label>Quantité</label>
        <input id="extraQty" type="number" value="1" min="1">
      </div>
      <div style="align-self:end;">
        <button class="btnAlt" type="button" id="addExtraBtn">Ajouter</button>
      </div>
    </div>

    <button class="btnAlt" type="button" id="clearExtrasBtn" style="margin-top:10px;">Vider extras</button>

    <div id="extrasList"></div>
  </div>

  <!-- CALCULER -->
  <button class="btnCalc" type="button" id="calcBtn">Calculer</button>

  <!-- RÉSULTAT -->
  <div class="card" id="resultCard" style="display:none;">
    <div class="sectionTitle">Résumé</div>

    <div class="summaryBox">
      <div class="summaryRow"><span>Sous-total</span><strong id="subTotalTxt">0,00 $</strong></div>
      <div class="summaryRow"><span>TPS (5 %)</span><strong id="tpsTxt">0,00 $</strong></div>
      <div class="summaryRow"><span>TVQ (9,975 %)</span><strong id="tvqTxt">0,00 $</strong></div>
      <div class="summaryRow"><span>Dépôt reçu</span><strong id="depositTxt">- 0,00 $</strong></div>
      <div class="summaryRow"><span>Total à payer</span><strong id="payableTxt" class="totalBig">0,00 $</strong></div>
    </div>
  </div>

</div>

<script>
const TPS = 0.05;
const TVQ = 0.09975;
const cart = [];

const $ = id => document.getElementById(id);
const money = v => (Number(v)||0).toLocaleString("fr-CA",{style:"currency",currency:"CAD"});

function timeToMin(t){
  if(!t||!t.includes(":"))return null;
  const[a,b]=t.split(":").map(Number);
  return a*60+b;
}
function updateHours(){
  const s=timeToMin($("startTime").value);
  const e=timeToMin($("endTime").value);
  if(s===null||e===null)return;
  let d=e-s; if(d<0)d+=1440;
  $("hoursWorked").value=Math.round((d/60)*100)/100;
}

function renderExtras(){
  const d=$("extrasList"); d.innerHTML="";
  cart.forEach((it,i)=>{
    d.innerHTML+=`<div class="extraItem">${it.qty} × ${it.name}<button class="removeBtn" onclick="removeExtra(${i})">✕</button></div>`;
  });
  if(!cart.length)d.innerHTML='<div class="small">Aucun extra ajouté</div>';
}
function addExtra(){
  const sel=$("extraSelect");
  cart.push({name:sel.options[sel.selectedIndex].text,price:+sel.value,qty:+$("extraQty").value});
  renderExtras();
}
function removeExtra(i){cart.splice(i,1);renderExtras();}
function clearExtras(){cart.length=0;renderExtras();}

function calculate(){
  updateHours();
  let sub=(+$("rate").value * +$("hoursWorked").value) + (+$("rate").value * +$("transportHours").value);
  cart.forEach(i=>sub+=i.price*i.qty);
  const tps=sub*TPS, tvq=sub*TVQ;
  $("subTotalTxt").textContent=money(sub);
  $("tpsTxt").textContent=money(tps);
  $("tvqTxt").textContent=money(tvq);
  $("depositTxt").textContent="- "+money($("deposit").value);
  $("payableTxt").textContent=money(sub+tps+tvq-$("deposit").value);
  $("resultCard").style.display="block";
}

$("startTime").oninput=updateHours;
$("endTime").oninput=updateHours;
$("addExtraBtn").onclick=addExtra;
$("clearExtrasBtn").onclick=clearExtras;
$("calcBtn").onclick=calculate;

renderExtras();
</script>

</body>
</html>