<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculatrice Colivex</title>

<style>
body{font-family:Arial;background:#eef2f7;margin:0;padding:18px}
.container{max-width:480px;margin:auto;background:#fff;padding:18px;border-radius:14px;border-top:6px solid #c1121f}
h1{text-align:center;color:#1f4e79;margin:0}
h1 span{color:#c1121f}
label{font-weight:700;margin-top:12px;display:block}
input,select,button{width:100%;padding:12px;margin-top:6px;font-size:16px;border-radius:10px;border:1px solid #ccc}
button{background:#c1121f;color:#fff;font-weight:800;border:none;margin-top:18px}
.toggle{margin-top:14px;background:#1f4e79;color:#fff;padding:12px;border-radius:10px;text-align:center;font-weight:800;cursor:pointer}
.result{margin-top:18px;background:#f7f9fc;padding:14px;border-radius:12px;border-left:6px solid #1f4e79}
.line{display:flex;justify-content:space-between;margin:8px 0}
.total{font-weight:900;font-size:18px}
</style>
</head>

<body>
<div class="container">
<h1>Transport <span>Colivex</span></h1>

<label>Tarif horaire ($)</label>
<input id="taux" type="number" value="155">

<label>Heure d’arrivée</label>
<input id="arrivee" type="time">

<label>Heure de départ</label>
<input id="depart" type="time">

<label>Frais transport (heures)</label>
<select id="transport">
  <option value="0">0 h</option>
  <option value="0.5">0.5 h</option>
  <option value="1" selected>1 h</option>
  <option value="1.5">1.5 h</option>
  <option value="2">2 h</option>
</select>

<label>Extra (1 seul)</label>
<select id="extra">
  <option value="0">Aucun</option>
  <option value="10">Sac à matelas – 10 $</option>
  <option value="2.5">Tape – 2.50 $</option>
  <option value="20">Boîte garde-robe – 20 $</option>
  <option value="50">Boîte TV – 50 $</option>
</select>

<label>Taxes</label>
<select id="taxes">
  <option value="on" selected>Avec taxes (TPS + TVQ)</option>
  <option value="off">Sans taxes</option>
</select>

<label>Dépôt (taxes incluses)</label>
<select id="depot">
  <option value="0">Aucun dépôt</option>
  <option value="250" selected>250 $</option>
</select>

<button onclick="calculer()">Calculer</button>

<div class="result" id="result" style="display:none">
  <div class="line"><span>Heures travaillées</span><strong id="hTrav">0.00 h</strong></div>
  <div class="line"><span>Heures facturables</span><strong id="hFact">0.00 h</strong></div>

  <hr>

  <div class="line"><span>Sous-total</span><strong id="sub">0.00 $</strong></div>
  <div class="line"><span>Extra</span><strong id="extraTxt">0.00 $</strong></div>
  <div class="line"><span>TPS (5 %)</span><strong id="tps">0.00 $</strong></div>
  <div class="line"><span>TVQ (9.975 %)</span><strong id="tvq">0.00 $</strong></div>

  <div class="line total"><span>Total taxes incluses</span><strong id="total">0.00 $</strong></div>
  <div class="line"><span>Dépôt reçu</span><strong id="depTxt">-0.00 $</strong></div>
  <div class="line total"><span>Grand total à payer</span><strong id="grand">0.00 $</strong></div>
</div>
</div>

<script>
const TPS=0.05, TVQ=0.09975, MIN=3;

function toH(t){ if(!t)return null; let[a,b]=t.split(":").map(Number); return a+b/60; }

function calculer(){
  const taux=+tauxInput.value;
  const a=toH(arrivee.value);
  const d=toH(depart.value);
  if(a===null||d===null){ alert("Choisir heure arrivée et départ"); return; }

  let hTrav=d-a; if(hTrav<0)hTrav+=24;
  const hFact=Math.max(hTrav,MIN)+(+transport.value);

  const extraVal=+extra.value;
  const sousTotal=(taux*hFact)+extraVal;

  let tpsVal=0, tvqVal=0;
  if(taxes.value==="on"){
    tpsVal=sousTotal*TPS;
    tvqVal=sousTotal*TVQ;
  }

  const total=sousTotal+tpsVal+tvqVal;
  const dep=+depot.value;
  const grand=total-dep;

  result.style.display="block";
  hTravTxt.textContent=hTrav.toFixed(2)+" h";
  hFactTxt.textContent=hFact.toFixed(2)+" h";
  subTxt.textContent=sousTotal.toFixed(2)+" $";
  extraTxt.textContent=extraVal.toFixed(2)+" $";
  tpsTxt.textContent=tpsVal.toFixed(2)+" $";
  tvqTxt.textContent=tvqVal.toFixed(2)+" $";
  totalTxt.textContent=total.toFixed(2)+" $";
  depTxt.textContent="-"+dep.toFixed(2)+" $";
  grandTxt.textContent=grand.toFixed(2)+" $";
}

const tauxInput=taux,
arrivee=document.getElementById("arrivee"),
depart=document.getElementById("depart"),
transport=document.getElementById("transport"),
extra=document.getElementById("extra"),
taxes=document.getElementById("taxes"),
depot=document.getElementById("depot"),
result=document.getElementById("result"),
hTravTxt=document.getElementById("hTrav"),
hFactTxt=document.getElementById("hFact"),
subTxt=document.getElementById("sub"),
extraTxt=document.getElementById("extraTxt"),
tpsTxt=document.getElementById("tps"),
tvqTxt=document.getElementById("tvq"),
totalTxt=document.getElementById("total"),
depTxt=document.getElementById("depTxt"),
grandTxt=document.getElementById("grand");
</script>
</body>
</html