<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Calculatrice Transport Colivex</title>

<style>
:root{
  --red:#D71920;      /* Rouge logo Colivex */
  --blue:#1E4FA3;     /* Bleu logo Colivex */
  --bg:#f4f6fb;
  --card:#ffffff;
  --border:#e5e7eb;
}

*{box-sizing:border-box}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;background:var(--bg);}
.container{max-width:760px;margin:auto;padding:14px;}

.header{
  background:linear-gradient(135deg,var(--blue),var(--red));
  color:#fff;border-radius:16px;padding:18px;text-align:center;
}
.header img{max-width:190px;margin-bottom:10px;background:#fff;border-radius:12px;padding:8px;}

.card{background:#fff;border:1px solid var(--border);border-radius:14px;padding:14px;margin-top:14px;}
label{font-weight:800;font-size:14px;}
input,select,button{width:100%;padding:12px;margin-top:6px;border-radius:12px;border:1px solid var(--border);font-size:16px;}

button.primary{background:linear-gradient(135deg,var(--blue),var(--red));color:#fff;font-weight:900;border:none;}
button.secondary{background:#fff;font-weight:800;}

.row{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
@media(max-width:600px){.row{grid-template-columns:1fr}}

.extraItem{
  display:flex;justify-content:space-between;align-items:center;
  border:1px solid var(--border);padding:10px;border-radius:12px;margin-top:8px;
}
.remove{
  background:#fff;border:1px solid var(--border);border-radius:10px;
  width:38px;height:38px;font-size:18px;cursor:pointer;
}
.totalBox{background:#eef3ff;border:2px solid var(--blue);border-radius:14px;padding:14px;}
.small{color:#6b7280;font-size:13px;margin-top:6px;}
</style>
</head>

<body>
<div class="container">

  <div class="header">
    <img src="./logo-colivex.png" alt="Transport Colivex">
    <h2>Calculatrice de facture</h2>
    <div class="small" style="color:#fff;opacity:.95">TPS/TVQ + Dépôt + Extras panier</div>
  </div>

  <div class="card row">
    <div>
      <label>Tarif horaire ($)</label>
      <input id="rate" type="number" value="145">
    </div>
    <div>
      <label>Heures travaillées</label>
      <input id="hours" type="number" step="0.25">
    </div>
    <div>
      <label>Frais transport (heures)</label>
      <input id="transport" type="number" value="1" step="0.25">
    </div>
    <div>
      <label>Dépôt reçu (tx incl.)</label>
      <input id="deposit" type="number" value="250">
    </div>
  </div>

  <div class="card">
    <label>Extras – Matériel d’emballage</label>

    <select id="extraSelect">
      <option value="2.5">Ruban adhésif 2" (TAPE) — 2,50 $</option>
      <option value="6">Housse à matelas 39" (simple) — 6,00 $</option>
      <option value="8">Housse à matelas 60" (queen) — 8,00 $</option>
      <option value="11">Housse à matelas 70" (king) — 11,00 $</option>
      <option value="2.25">Boîte 1,5 pieds cubes — 2,25 $</option>
      <option value="2.75">Boîte 2 pieds cubes — 2,75 $</option>
      <option value="4.5">Boîte 4 pieds cubes — 4,50 $</option>
      <option value="5.5">Boîte 5 pieds cubes — 5,50 $</option>
      <option value="7">Boîte à vaisselle — 7,00 $</option>
      <option value="7.5">Boîte abat-jour — 7,50 $</option>
      <option value="18.5">Boîte garde-robes (inclut la barre) — 18,50 $</option>
      <option value="0">Garde-robes NO CHARGE — 0,00 $</option>
      <option value="7.5">Boîte miroir/cadre (Inner) — 7,50 $</option>
      <option value="8.5">Boîte miroir/cadre (Outer) — 8,50 $</option>
      <option value="8.5">Rouleau papier bulles 1/2" x 48" x 5' — 8,50 $</option>
      <option value="8.5">Rouleau papier bulles 3/16" x 48" x 10' — 8,50 $</option>
      <option value="15">Papier d'emballage 10 livres — 15,00 $</option>
      <option value="27.5">Papier d'emballage 25 livres — 27,50 $</option>
      <option value="25">Couverture matelassée — 25,00 $</option>
      <option value="15">Couverture matelassée (usagée) — 15,00 $</option>
      <option value="18.5">Garde-Robes usagée — 18,50 $</option>
    </select>

    <input id="qty" type="number" value="1" min="1">
    <button class="primary" onclick="addExtra()">Ajouter extra</button>
    <button class="secondary" style="margin-top:10px" onclick="clearExtras()">Vider extras</button>

    <div id="extras"></div>
  </div>

  <div class="card">
    <button class="primary" onclick="calculate()">Calculer total</button>
  </div>

  <div class="card totalBox" id="resultBox" style="display:none">
    <p>Sous-total : <strong id="sub"></strong></p>
    <p>TPS (5%) : <strong id="tps"></strong></p>
    <p>TVQ (9,975%) : <strong id="tvq"></strong></p>
    <p>Dépôt : <strong id="dep"></strong></p>
    <h3>Total à payer : <span id="total"></span></h3>
  </div>

</div>

<script>
const extras=[];

function money(v){return v.toLocaleString("fr-CA",{style:"currency",currency:"CAD"});}

function addExtra(){
  const sel=document.getElementById("extraSelect");
  const price=parseFloat(sel.value);
  const name=sel.options[sel.selectedIndex].text;
  const qty=parseInt(document.getElementById("qty").value,10);

  if(!qty || qty<=0){ alert("Quantité invalide"); return; }

  extras.push({name,price,qty});
  renderExtras();
}

function renderExtras(){
  const div=document.getElementById("extras");
  div.innerHTML="";
  if(extras.length===0){ div.innerHTML='<div class="small">Aucun extra ajouté</div>'; return; }

  extras.forEach((e,i)=>{
    div.innerHTML+=`
      <div class="extraItem">
        <div>${e.qty} × ${e.name}</div>
        <button class="remove" onclick="removeExtra(${i})">✕</button>
      </div>`;
  });
}

function removeExtra(i){ extras.splice(i,1); renderExtras(); }
function clearExtras(){ extras.length=0; renderExtras(); }

function calculate(){
  const rate=+document.getElementById("rate").value||0;
  const hours=+document.getElementById("hours").value||0;
  const transport=+document.getElementById("transport").value||0;
  const deposit=+document.getElementById("deposit").value||0;

  let subtotal=(rate*hours)+(rate*transport);
  extras.forEach(e=>subtotal+=e.price*e.qty);

  const tps=subtotal*0.05;
  const tvq=subtotal*0.09975;
  const total=subtotal+tps+tvq-deposit;

  document.getElementById("sub").innerText=money(subtotal);
  document.getElementById("tps").innerText=money(tps);
  document.getElementById("tvq").innerText=money(tvq);
  document.getElementById("dep").innerText="-"+money(deposit);
  document.getElementById("total").innerText=money(total);
  document.getElementById("resultBox").style.display="block";
}

renderExtras();
</script>
</body>
</html>