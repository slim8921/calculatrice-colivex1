<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculatrice Colivex</title>

<style>
body{font-family:Arial;background:#eef2f7;margin:0;padding:16px}
.container{max-width:520px;margin:auto;background:#fff;padding:18px;border-radius:14px;border-top:6px solid #c1121f}
h1{text-align:center;color:#1f4e79;margin:0}
h1 span{color:#c1121f}
label{font-weight:700;margin-top:14px;display:block}
input,select,button{width:100%;padding:12px;margin-top:6px;font-size:16px;border-radius:10px;border:1px solid #ccc}
button{background:#c1121f;color:#fff;font-weight:800;border:none;margin-top:18px}
.cart{margin-top:14px;background:#f7f9fc;border-radius:12px;padding:12px}
.cart h3{margin:0 0 8px 0}
.item{display:flex;justify-content:space-between;align-items:center;margin:6px 0}
.qty{display:flex;gap:6px;align-items:center}
.qty button{width:34px;height:34px;padding:0;font-size:18px}
.result{margin-top:18px;background:#f7f9fc;padding:14px;border-radius:12px;border-left:6px solid #1f4e79}
.line{display:flex;justify-content:space-between;margin:6px 0}
.total{font-weight:900;font-size:18px}
</style>
</head>

<body>
<div class="container">
<h1>Transport <span>Colivex</span></h1>

<label>Tarif horaire ($)</label>
<input id="rate" type="number" value="155">

<label>Heure d’arrivée</label>
<input id="start" type="time">

<label>Heure de départ</label>
<input id="end" type="time">

<label>Frais transport (heures)</label>
<select id="transport">
  <option value="1" selected>1 h</option>
  <option value="1.5">1.5 h</option>
  <option value="2">2 h</option>
</select>

<div class="cart">
<h3>Extras (panier)</h3>

<div class="item">
<span>Sac à matelas (10 $)</span>
<div class="qty">
<button onclick="chg('mat',-1)">−</button>
<span id="mat">0</span>
<button onclick="chg('mat',1)">+</button>
</div>
</div>

<div class="item">
<span>Tape (2.50 $)</span>
<div class="qty">
<button onclick="chg('tape',-1)">−</button>
<span id="tape">0</span>
<button onclick="chg('tape',1)">+</button>
</div>
</div>

<div class="item">
<span>Boîte garde-robe (20 $)</span>
<div class="qty">
<button onclick="chg('robe',-1)">−</button>
<span id="robe">0</span>
<button onclick="chg('robe',1)">+</button>
</div>
</div>

<div class="item">
<span>Boîte TV (50 $)</span>
<div class="qty">
<button onclick="chg('tv',-1)">−</button>
<span id="tv">0</span>
<button onclick="chg('tv',1)">+</button>
</div>
</div>
</div>

<label>Taxes</label>
<select id="tax">
<option value="on" selected>Avec taxes</option>
<option value="off">Sans taxes</option>
</select>

<label>Dépôt reçu (taxes incluses)</label>
<select id="deposit">
<option value="0">Aucun</option>
<option value="250" selected>250 $</option>
</select>

<button onclick="calc()">Calculer</button>

<div class="result" id="res" style="display:none">
<div class="line"><span>Heures travaillées</span><strong id="worked">0.00 h</strong></div>
<div class="line"><span>Heures facturables</span><strong id="billable">0.00 h</strong></div>
<hr>
<div class="line"><span>Main-d’œuvre</span><strong id="labor">0.00 $</strong></div>
<div class="line"><span>Extras</span><strong id="extras">0.00 $</strong></div>
<div class="line"><span>Sous-total</span><strong id="subtotal">0.00 $</strong></div>
<div class="line"><span>TPS (5%)</span><strong id="tps">0.00 $</strong></div>
<div class="line"><span>TVQ (9.975%)</span><strong id="tvq">0.00 $</strong></div>
<div class="line total"><span>Total taxes incluses</span><strong id="total">0.00 $</strong></div>
<div class="line"><span>Dépôt</span><strong id="dep">-0.00 $</strong></div>
<div class="line total"><span>Grand total à payer</span><strong id="grand">0.00 $</strong></div>
</div>

</div>

<script>
const price={mat:10,tape:2.5,robe:20,tv:50}
function chg(id,n){let e=document.getElementById(id);e.textContent=Math.max(0,Number(e.textContent)+n)}

function calc(){
let s=document.getElementById('start').value
let e=document.getElementById('end').value
if(!s||!e)return alert("Entrer les heures")

let ms=(new Date("1970-1-1 "+e)-new Date("1970-1-1 "+s))/3600000
ms=Math.max(ms,3)
ms=Math.ceil(ms*4)/4

let transport=parseFloat(document.getElementById('transport').value)
let bill=ms+transport
let rate=parseFloat(document.getElementById('rate').value)

let extras=0
for(let k in price){extras+=Number(document.getElementById(k).textContent)*price[k]}

let labor=bill*rate
let sub=labor+extras

let tps=0,tvq=0
if(document.getElementById('tax').value==="on"){
tps=sub*0.05
tvq=sub*0.09975
}

let total=sub+tps+tvq
let dep=parseFloat(document.getElementById('deposit').value)
let grand=total-dep

document.getElementById('worked').textContent=ms.toFixed(2)+" h"
document.getElementById('billable').textContent=bill.toFixed(2)+" h"
document.getElementById('labor').textContent=labor.toFixed(2)+" $"
document.getElementById('extras').textContent=extras.toFixed(2)+" $"
document.getElementById('subtotal').textContent=sub.toFixed(2)+" $"
document.getElementById('tps').textContent=tps.toFixed(2)+" $"
document.getElementById('tvq').textContent=tvq.toFixed(2)+" $"
document.getElementById('total').textContent=total.toFixed(2)+" $"
document.getElementById('dep').textContent="-"+dep.toFixed(2)+" $"
document.getElementById('grand').textContent=grand.toFixed(2)+" $"
document.getElementById('res').style.display="block"
}
</script>

</body>
</html>