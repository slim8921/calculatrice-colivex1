<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Calculatrice Colivex</title>

<style>
:root{
  --red:#c4161c;
  --blue:#0b3c89;
  --bg:#f4f6fb;
  --card:#ffffff;
  --border:#e5e7eb;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:var(--bg);
}

.container{
  max-width:760px;
  margin:auto;
  padding:14px;
}

.header{
  background:linear-gradient(135deg,var(--blue),var(--red));
  color:#fff;
  border-radius:14px;
  padding:16px;
  text-align:center;
}

.header img{
  max-width:160px;
  margin-bottom:10px;
}

.card{
  background:#fff;
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  margin-top:14px;
}

label{
  font-weight:700;
  font-size:14px;
}

input,select,button{
  width:100%;
  padding:12px;
  margin-top:6px;
  border-radius:12px;
  border:1px solid var(--border);
  font-size:16px;
}

button.primary{
  background:linear-gradient(135deg,var(--blue),var(--red));
  color:#fff;
  font-weight:900;
  border:none;
}

button.secondary{
  background:#fff;
  font-weight:700;
}

.row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}

@media(max-width:600px){
  .row{grid-template-columns:1fr;}
}

.extraItem{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border:1px solid var(--border);
  padding:10px;
  border-radius:12px;
  margin-top:8px;
}

.remove{
  background:#fff;
  border:1px solid var(--border);
  border-radius:10px;
  width:40px;
  height:40px;
  font-size:18px;
}
.totalBox{
  background:#eef3ff;
  border:2px solid var(--blue);
  border-radius:14px;
  padding:12px;
}
</style>
</head>

<body>
<div class="container">

<div class="header">
  <img src="logo-colivex.png" alt="Transport Colivex">
  <h2>Calculatrice de facture</h2>
</div>

<div class="card row">
  <div>
    <label>Tarif horaire ($)</label>
    <input id="rate" type="number" value="145">
  </div>
  <div>
    <label>Heures travaillées</label>
    <input id="hours" type="number" step="0.25">
  </div>
  <div>
    <label>Frais transport (h)</label>
    <input id="transport" type="number" value="1" step="0.25">
  </div>
  <div>
    <label>Dépôt reçu (tx incl.)</label>
    <input id="deposit" type="number" value="250">
  </div>
</div>

<div class="card">
  <label>Extras (matériel)</label>

  <select id="extraSelect">
    <option value="2.5">Tape 2" – 2,50 $</option>
    <option value="6">Housse matelas 39" – 6,00 $</option>
    <option value="8">Housse matelas 60" – 8,00 $</option>
    <option value="11">Housse matelas 70" – 11,00 $</option>
    <option value="2.25">Boîte 1.5 pi³ – 2,25 $</option>
    <option value="2.75">Boîte 2 pi³ – 2,75 $</option>
    <option value="4.5">Boîte 4 pi³ – 4,50 $</option>
    <option value="5.5">Boîte 5 pi³ – 5,50 $</option>
    <option value="7">Boîte vaisselle – 7,00 $</option>
    <option value="7.5">Boîte abat-jour – 7,50 $</option>
    <option value="18.5">Boîte garde-robe – 18,50 $</option>
    <option value="0">Garde-robe **NO CHARGE**</option>
    <option value="7.5">Boîte miroir (inner) – 7,50 $</option>
    <option value="8.5">Boîte miroir (outer) – 8,50 $</option>
    <option value="8.5">Papier bulles 5' – 8,50 $</option>
    <option value="8.5">Papier bulles 10' – 8,50 $</option>
    <option value="15">Papier emballage 10 lb – 15,00 $</option>
    <option value="27.5">Papier emballage 25 lb – 27,50 $</option>
    <option value="25">Couverture matelassée – 25,00 $</option>
    <option value="15">Couverture usagée – 15,00 $</option>
    <option value="18.5">Garde-robe usagée – 18,50 $</option>
  </select>

  <input id="qty" type="number" value="1" min="1">
  <button class="primary" onclick="addExtra()">Ajouter extra</button>

  <div id="extras"></div>
</div>

<div class="card">
  <button class="primary" onclick="calculate()">Calculer total</button>
</div>

<div class="card totalBox" id="resultBox" style="display:none;">
  <p>Sous-total : <strong id="sub"></strong></p>
  <p>TPS : <strong id="tps"></strong></p>
  <p>TVQ : <strong id="tvq"></strong></p>
  <p>Dépôt : <strong>-250,00 $</strong></p>
  <h3>Total à payer : <span id="total"></span></h3>
</div>

</div>

<script>
const extras=[];
function money(v){return v.toLocaleString("fr-CA",{style:"currency",currency:"CAD"});}

function addExtra(){
  const sel=document.getElementById("extraSelect");
  const price=parseFloat(sel.value);
  const name=sel.options[sel.selectedIndex].text;
  const qty=parseInt(document.getElementById("qty").value);
  extras.push({name,price,qty});
  renderExtras();
}

function renderExtras(){
  const div=document.getElementById("extras");
  div.innerHTML="";
  extras.forEach((e,i)=>{
    div.innerHTML+=`
      <div class="extraItem">
        ${e.qty} × ${e.name}
        <button class="remove" onclick="removeExtra(${i})">✕</button>
      </div>`;
  });
}

function removeExtra(i){
  extras.splice(i,1);
  renderExtras();
}

function calculate(){
  const rate=+rateInput.value||0;
  const hours=+hoursInput.value||0;
  const transport=+transportInput.value||0;
  let subtotal=(rate*hours)+(rate*transport);
  extras.forEach(e=>subtotal+=e.price*e.qty);
  const tps=subtotal*0.05;
  const tvq=subtotal*0.09975;
  const total=subtotal+tps+tvq-250;

  document.getElementById("sub").innerText=money(subtotal);
  document.getElementById("tps").innerText=money(tps);
  document.getElementById("tvq").innerText=money(tvq);
  document.getElementById("total").innerText=money(total);
  document.getElementById("resultBox").style.display="block";
}

const rateInput=document.getElementById("rate");
const hoursInput=document.getElementById("hours");
const transportInput=document.getElementById("transport");
</script>

</body>
</html>