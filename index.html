<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Calculatrice Transport Colivex</title>

<style>
:root{
  --blue:#1877F2;      /* Bleu Facebook */
  --blueDark:#1459B3;
  --red:#C62828;       /* Rouge Colivex */
  --redDark:#9E1F1F;
  --bg:#F0F2F5;
  --card:#FFFFFF;
  --border:#DADDE1;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:var(--bg);
  color:#050505;
}

.container{
  max-width:760px;
  margin:auto;
  padding:14px;
}

/* BARRE BLEUE STYLE FB */
.topBar{
  background:var(--blue);
  color:#fff;
  font-weight:900;
  font-size:18px;
  text-align:center;
  padding:14px;
  border-radius:12px;
  margin-bottom:14px;
}

/* CARTES */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:12px;
  padding:14px;
  margin-bottom:14px;
}

/* TITRES DE SECTION (BLEU) */
.sectionTitle{
  background:var(--blue);
  color:#fff;
  font-weight:900;
  padding:10px 12px;
  border-radius:10px;
  margin:-14px -14px 14px -14px;
}

/* CHAMPS */
label{
  font-weight:800;
  font-size:14px;
  display:block;
  margin-top:10px;
  color:#1c1e21;
}
input,select,button{
  width:100%;
  padding:12px;
  margin-top:6px;
  border:1px solid var(--border);
  border-radius:10px;
  font-size:16px;
  background:#fff;
}

/* GRILLE */
.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
@media(max-width:600px){
  .grid{grid-template-columns:1fr;}
}

/* BOUTONS */
.btnBlue{
  background:var(--blue);
  color:#fff;
  border:none;
  font-weight:900;
  border-radius:12px;
  cursor:pointer;
}
.btnBlue:active{background:var(--blueDark);}

.btnCalc{
  background:var(--red);
  color:#fff;
  border:none;
  font-weight:900;
  font-size:18px;
  padding:14px;
  border-radius:14px;
  cursor:pointer;
}
.btnCalc:active{background:var(--redDark);}

/* EXTRAS */
.extraItem{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border:1px solid var(--border);
  border-radius:12px;
  padding:10px;
  margin-top:8px;
  gap:10px;
}
.removeBtn{
  width:40px;
  height:40px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#fff;
  font-size:18px;
  cursor:pointer;
  color:var(--red);
}

/* RÉSUMÉ */
.summaryBox{
  border:2px solid var(--blue);
  border-radius:14px;
  padding:14px;
  background:#fff;
}
.summaryRow{
  display:flex;
  justify-content:space-between;
  padding:8px 0;
  border-bottom:1px solid var(--border);
}
.summaryRow:last-child{border-bottom:none;}
.totalBig{
  font-size:20px;
  font-weight:900;
  color:var(--red);
}

.small{font-size:13px;color:#65676B;}
</style>
</head>

<body>
<div class="container">

  <div class="topBar">Calculatrice Transport Colivex</div>

  <!-- HEURES -->
  <div class="card">
    <div class="sectionTitle">Heures de travail</div>

    <div class="grid">
      <div>
        <label>Heure d’arrivée</label>
        <input id="startTime" type="time">
      </div>
      <div>
        <label>Heure de départ</label>
        <input id="endTime" type="time">
      </div>
      <div>
        <label>Heures travaillées (auto)</label>
        <input id="hoursWorked" type="number" readonly>
        <div class="small">Calcul automatique (gère minuit)</div>
      </div>
      <div>
        <label>Tarif horaire ($)</label>
        <input id="rate" type="number" value="145">
      </div>
      <div>
        <label>Frais transport (heures)</label>
        <input id="transportHours" type="number" value="1" step="0.25">
      </div>
      <div>
        <label>Dépôt reçu (tx incluses)</label>
        <input id="deposit" type="number" value="250">
      </div>
    </div>
  </div>

  <!-- EXTRAS -->
  <div class="card">
    <div class="sectionTitle">Ajouter des extras</div>

    <select id="extraSelect">
      <option value="2.5">Ruban adhésif 2 pouces (TAPE) — 2,50 $</option>
      <option value="6">Housse à matelas 39" — 6,00 $</option>
      <option value="8">Housse à matelas 60" — 8,00 $</option>
      <option value="11">Housse à matelas 70" — 11,00 $</option>
      <option value="2.25">Boîte 1,5 pieds cubes — 2,25 $</option>
      <option value="2.75">Boîte 2 pieds cubes — 2,75 $</option>
      <option value="4.5">Boîte 4 pieds cubes — 4,50 $</option>
      <option value="5.5">Boîte 5 pieds cubes — 5,50 $</option>
      <option value="7">Boîte à vaisselle — 7,00 $</option>
      <option value="7.5">Boîte abat-jour — 7,50 $</option>
      <option value="18.5">Boîte garde-robes — 18,50 $</option>
      <option value="0">Garde-robes NO CHARGE — 0,00 $</option>
      <option value="8.5">Rouleau papier bulles — 8,50 $</option>
      <option value="15">Papier d'emballage 10 lb — 15,00 $</option>
      <option value="27.5">Papier d'emballage 25 lb — 27,50 $</option>
      <option value="25">Couverture matelassée — 25,00 $</option>
      <option value="15">Couverture matelassée (usagée) — 15,00 $</option>
    </select>

    <div class="grid">
      <div>
        <label>Quantité</label>
        <input id="extraQty" type="number" value="1" min="1">
      </div>
      <div style="align-self:end;">
        <button class="btnBlue" type="button" id="addExtraBtn">Ajouter</button>
      </div>
    </div>

    <button class="btnBlue" type="button" id="clearExtrasBtn" style="margin-top:10px;">Vider extras</button>

    <div id="extrasList"></div>
  </div>

  <!-- CALCULER -->
  <button class="btnCalc" type="button" id="calcBtn">Calculer</button>

  <!-- RÉSULTAT -->
  <div class="card" id="resultCard" style="display:none;">
    <div class="sectionTitle">Résumé indiquatif</div>

    <div class="summaryBox">
      <div class="summaryRow"><span>Sous-total</span><strong id="subTotalTxt">0,00 $</strong></div>
      <div class="summaryRow"><span>TPS (5 %)</span><strong id="tpsTxt">0,00 $</strong></div>
      <div class="summaryRow"><span>TVQ (9,975 %)</span><strong id="tvqTxt">0,00 $</strong></div>
      <div class="summaryRow"><span>Dépôt reçu</span><strong id="depositTxt">- 0,00 $</strong></div>
      <div class="summaryRow"><span>Total à payer</span><strong id="payableTxt" class="totalBig">0,00 $</strong></div>
    </div>
  </div>

</div>

<script>
const TPS=0.05, TVQ=0.09975, cart=[];
const $=id=>document.getElementById(id);
const money=v=>(Number(v)||0).toLocaleString("fr-CA",{style:"currency",currency:"CAD"});

function tmin(t){if(!t||!t.includes(":"))return null;const[a,b]=t.split(":").map(Number);return a*60+b;}
function updateHours(){
  const s=tmin(startTime.value), e=tmin(endTime.value);
  if(s===null||e===null)return;
  let d=e-s; if(d<0)d+=1440;
  hoursWorked.value=Math.round((d/60)*100)/100;
}
function renderExtras(){
  extrasList.innerHTML=cart.length?``:`<div class="small">Aucun extra ajouté</div>`;
  cart.forEach((i,x)=>extrasList.innerHTML+=`<div class="extraItem">${i.qty} × ${i.name}<button class="removeBtn" onclick="cart.splice(${x},1);renderExtras()">✕</button></div>`);
}
function addExtra(){
  cart.push({name:extraSelect.options[extraSelect.selectedIndex].text,price:+extraSelect.value,qty:+extraQty.value});
  renderExtras();
}
function calculate(){
  updateHours();
  let sub=(rate.value*hoursWorked.value)+(rate.value*transportHours.value);
  cart.forEach(i=>sub+=i.price*i.qty);
  subTotalTxt.textContent=money(sub);
  tpsTxt.textContent=money(sub*TPS);
  tvqTxt.textContent=money(sub*TVQ);
  depositTxt.textContent="- "+money(deposit.value);
  payableTxt.textContent=money(sub+sub*TPS+sub*TVQ-deposit.value);
  resultCard.style.display="block";
}

startTime.oninput=endTime.oninput=updateHours;
addExtraBtn.onclick=addExtra;
clearExtrasBtn.onclick=()=>{cart.length=0;renderExtras();};
calcBtn.onclick=calculate;
renderExtras();
</script>

</body>
</html>