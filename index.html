<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculatrice – Transport Colivex</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#eef2f7;
  padding:20px;
}
.container {
  max-width:420px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:12px;
  box-shadow:0 6px 14px rgba(0,0,0,.12);
}
.logo {
  font-size:22px;
  font-weight:bold;
  text-align:center;
  color:#1f4e79;
}
.logo span { color:#c1121f; }
.subtitle {
  text-align:center;
  font-size:13px;
  color:#555;
  margin-bottom:15px;
}
label {
  display:block;
  font-weight:bold;
  margin-top:12px;
  color:#1f4e79;
}
input, select {
  width:100%;
  padding:10px;
  margin-top:5px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:16px;
}
.result {
  margin-top:18px;
  padding:12px;
  background:#f7f9fc;
  border-radius:10px;
  border-left:5px solid #1f4e79;
}
.line {
  display:flex;
  justify-content:space-between;
  margin:6px 0;
}
.total {
  font-size:18px;
  font-weight:bold;
  color:#1f4e79;
}
.small {
  font-size:12px;
  color:#555;
  margin-top:8px;
}
hr {
  border:none;
  border-top:1px solid #ddd;
  margin:12px 0;
}
</style>
</head>

<body>
<div class="container">

<div class="logo">Transport <span>Colivex</span></div>
<div class="subtitle">Calculatrice terrain – facturation</div>

<label>Taux horaire ($)</label>
<input type="number" id="taux" value="155">

<label>Heure d’arrivée</label>
<input type="time" id="arrivee">

<label>Heure de départ</label>
<input type="time" id="depart">

<label>Frais de transport (heures)</label>
<select id="transport">
  <option value="0">0 h</option>
  <option value="0.5">0.5 h</option>
  <option value="1" selected>1 h</option>
  <option value="1.5">1.5 h</option>
  <option value="2">2 h</option>
</select>

<div class="result">

  <div class="line">
    <span>Heures travaillées</span>
    <strong id="heuresTravail">0.00 h</strong>
  </div>

  <div class="line">
    <span>Heures facturables</span>
    <strong id="heuresFact">0.00 h</strong>
  </div>

  <hr>

  <div class="line">
    <span>Sous-total (avant taxes)</span>
    <strong id="sousTotal">0.00 $</strong>
  </div>

  <div class="line">
    <span>TPS (5 %)</span>
    <strong id="tps">0.00 $</strong>
  </div>

  <div class="line">
    <span>TVQ (9,975 %)</span>
    <strong id="tvq">0.00 $</strong>
  </div>

  <div class="line total">
    <span>Total (taxes incluses)</span>
    <strong id="totalTaxes">0.00 $</strong>
  </div>

  <div class="line">
    <span>Dépôt reçu (−250 $)</span>
    <strong id="depot">−250.00 $</strong>
  </div>

  <hr>

  <div class="line total">
    <span>Total à payer</span>
    <strong id="totalPayer">0.00 $</strong>
  </div>

  <div class="small">
    Heures facturables = max(heures travaillées, 3h) + transport.<br>
    Total = Sous-total + TPS + TVQ − dépôt.
  </div>

</div>
</div>

<script>
function calculer() {
  const taux = parseFloat(document.getElementById("taux").value) || 0;
  const arrivee = document.getElementById("arrivee").value;
  const depart = document.getElementById("depart").value;
  const transport = parseFloat(document.getElementById("transport").value) || 0;

  let heuresTravail = 0;

  if (arrivee && depart) {
    const a = new Date(`1970-01-01T${arrivee}`);
    const d = new Date(`1970-01-01T${depart}`);
    heuresTravail = (d - a) / 36e5;
    if (heuresTravail < 0) heuresTravail = 0;
  }

  const heuresBase = Math.max(heuresTravail, 3);
  const heuresFact = heuresBase + transport;

  const sousTotal = heuresFact * taux;
  const tps = sousTotal * 0.05;
  const tvq = sousTotal * 0.09975;
  const totalTaxes = sousTotal + tps + tvq;
  const totalPayer = totalTaxes - 250;

  document.getElementById("heuresTravail").innerText = heuresTravail.toFixed(2) + " h";
  document.getElementById("heuresFact").innerText = heuresFact.toFixed(2) + " h";
  document.getElementById("sousTotal").innerText = sousTotal.toFixed(2) + " $";
  document.getElementById("tps").innerText = tps.toFixed(2) + " $";
  document.getElementById("tvq").innerText = tvq.toFixed(2) + " $";
  document.getElementById("totalTaxes").innerText = totalTaxes.toFixed(2) + " $";
  document.getElementById("totalPayer").innerText = totalPayer.toFixed(2) + " $";
}

document.querySelectorAll("input, select").forEach(el =>
  el.addEventListener("input", calculer)
);
</script>

</body>
</html>